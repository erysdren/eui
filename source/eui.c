/*
MIT License

Copyright (c) 2023-2024 erysdren (it/she/they)

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
*/

/*
 *
 * EUI.C
 *
 */

#include <stdio.h>
#include <string.h>
#include <stdarg.h>
#include <stdlib.h>
#include <limits.h>

#include "eui.h"

/*
 *
 * enums
 *
 */

/* draw command type */
enum {
	DRAW_NONE,
	DRAW_PIXEL,
	DRAW_BOX,
	DRAW_GLYPH,
	DRAW_BITMAP
};

/*
 *
 * types
 *
 */

/* font */
typedef struct font_t {
	int glyph_w;
	int glyph_h;
	unsigned char *bitmap;
} font_t;

/* draw command */
typedef struct drawcmd_t {
	int type;
	int z;
	union {
		struct { int x; int y; unsigned int color; } pixel;
		struct { int x; int y; int w; int h; unsigned int color; } box;
		struct { int x; int y; unsigned int glyph; unsigned int color; font_t *font; } glyph;
		struct { int x; int y; int w; int h; int bpp; int pitch; void *pixels; } bitmap;
	} cmd;
} drawcmd_t;

/* frame */
typedef struct frame_t {
	int x, y;
	int w, h;
	struct {
		int x, y;
	} align;
	int clip;
	int z;
	int num_drawcmds;
} frame_t;

/*
 *
 * 8x8 font
 *
 */

static unsigned char font_8x8_bitmap[256][8] = {
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x10, 0x38, 0x7C, 0xFE, 0x38, 0x38, 0x38, 0x38 },
	{ 0x38, 0x38, 0x38, 0x38, 0xFE, 0x7C, 0x38, 0x10 },
	{ 0x10, 0x30, 0x7F, 0xFF, 0x7F, 0x30, 0x10, 0x00 },
	{ 0x08, 0x0C, 0xFE, 0xFF, 0xFE, 0x0C, 0x08, 0x00 },
	{ 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF },
	{ 0x1F, 0x1F, 0x1F, 0x1F, 0x9F, 0xA0, 0xC0, 0xF0 },
	{ 0x10, 0x38, 0x7C, 0xFE, 0x7C, 0x38, 0x10, 0x00 },
	{ 0x80, 0xC0, 0x60, 0x60, 0x33, 0x36, 0x1C, 0x18 },
	{ 0x00, 0x3C, 0x46, 0x89, 0xF1, 0x42, 0x3C, 0x00 },
	{ 0x00, 0x18, 0x66, 0x42, 0x42, 0xFF, 0x08, 0x00 },
	{ 0x00, 0xF8, 0x78, 0x08, 0x08, 0x0F, 0x07, 0x00 },
	{ 0x00, 0x00, 0x10, 0x38, 0x7C, 0xFE, 0x00, 0x00 },
	{ 0x00, 0x00, 0xFE, 0x7C, 0x38, 0x10, 0x00, 0x00 },
	{ 0x00, 0x02, 0x0E, 0x3E, 0x0E, 0x02, 0x00, 0x00 },
	{ 0x00, 0x40, 0x70, 0x7C, 0x70, 0x40, 0x00, 0x00 },
	{ 0x00, 0x02, 0x0E, 0x3E, 0x0E, 0x02, 0x00, 0x00 },
	{ 0x00, 0x40, 0x70, 0x7C, 0x70, 0x40, 0x00, 0x00 },
	{ 0x81, 0xC3, 0xE7, 0xFF, 0xE7, 0xC3, 0x81, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0xFE, 0xFE, 0xFE, 0x00 },
	{ 0xFE, 0xDB, 0xDB, 0xDA, 0xD8, 0xD8, 0xD8, 0xD8 },
	{ 0x44, 0x18, 0x6C, 0xC6, 0x6C, 0x70, 0xC6, 0x7C },
	{ 0x18, 0x3C, 0x7E, 0x18, 0x18, 0x7E, 0x3C, 0x18 },
	{ 0x18, 0x3C, 0x7E, 0x18, 0x7E, 0x3C, 0x18, 0x7E },
	{ 0x18, 0x3C, 0x7E, 0x18, 0x18, 0x18, 0x18, 0x00 },
	{ 0x00, 0x18, 0x18, 0x18, 0x18, 0x7E, 0x3C, 0x18 },
	{ 0x00, 0x30, 0x60, 0xFE, 0x60, 0x30, 0x00, 0x00 },
	{ 0x00, 0x0C, 0x06, 0x7F, 0x06, 0x0C, 0x00, 0x00 },
	{ 0x00, 0x00, 0x06, 0x06, 0x06, 0xFE, 0x00, 0x00 },
	{ 0x00, 0x24, 0x66, 0xFF, 0x66, 0x24, 0x00, 0x00 },
	{ 0x00, 0x18, 0x18, 0x3C, 0x3C, 0x7E, 0x7E, 0x00 },
	{ 0x00, 0x7E, 0x7E, 0x3C, 0x3C, 0x18, 0x18, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x18, 0x3C, 0x3C, 0x18, 0x18, 0x00, 0x18, 0x00 },
	{ 0x6C, 0x6C, 0x6C, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x44, 0x44, 0xFE, 0x44, 0xFE, 0x44, 0x44, 0x00 },
	{ 0x18, 0x7C, 0x06, 0x3C, 0x60, 0x3E, 0x18, 0x00 },
	{ 0x00, 0xC6, 0x66, 0x30, 0x18, 0xCC, 0xC6, 0x00 },
	{ 0x38, 0x6C, 0x38, 0xDC, 0x76, 0x66, 0xDC, 0x00 },
	{ 0x1C, 0x18, 0x0C, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x30, 0x18, 0x0C, 0x0C, 0x0C, 0x18, 0x30, 0x00 },
	{ 0x0C, 0x18, 0x30, 0x30, 0x30, 0x18, 0x0C, 0x00 },
	{ 0x00, 0x66, 0x3C, 0xFF, 0x3C, 0x66, 0x00, 0x00 },
	{ 0x00, 0x18, 0x18, 0x7E, 0x18, 0x18, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x1C, 0x18, 0x0C },
	{ 0x00, 0x00, 0x00, 0x7E, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00 },
	{ 0xC0, 0x60, 0x30, 0x18, 0x0C, 0x06, 0x02, 0x00 },
	{ 0x7C, 0xC6, 0xE6, 0xD6, 0xCE, 0xC6, 0x7C, 0x00 },
	{ 0x18, 0x1C, 0x18, 0x18, 0x18, 0x18, 0x7E, 0x00 },
	{ 0x3C, 0x66, 0x60, 0x38, 0x0C, 0x06, 0x7E, 0x00 },
	{ 0x3C, 0x66, 0x60, 0x38, 0x60, 0x66, 0x3C, 0x00 },
	{ 0x70, 0x58, 0x6C, 0x66, 0xFE, 0x60, 0x60, 0x00 },
	{ 0x7E, 0x06, 0x3E, 0x60, 0x60, 0x66, 0x3C, 0x00 },
	{ 0x38, 0x0C, 0x06, 0x3E, 0x66, 0x66, 0x3C, 0x00 },
	{ 0x7E, 0x60, 0x60, 0x30, 0x18, 0x0C, 0x0C, 0x00 },
	{ 0x3C, 0x66, 0x66, 0x3C, 0x66, 0x66, 0x3C, 0x00 },
	{ 0x3C, 0x66, 0x66, 0x7C, 0x60, 0x30, 0x1C, 0x00 },
	{ 0x00, 0x00, 0x18, 0x18, 0x00, 0x18, 0x18, 0x00 },
	{ 0x00, 0x00, 0x18, 0x18, 0x00, 0x1C, 0x18, 0x0C },
	{ 0x30, 0x18, 0x0C, 0x06, 0x0C, 0x18, 0x30, 0x00 },
	{ 0x00, 0x00, 0x7E, 0x00, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x0C, 0x18, 0x30, 0x60, 0x30, 0x18, 0x0C, 0x00 },
	{ 0x3C, 0x66, 0x60, 0x30, 0x18, 0x00, 0x18, 0x00 },
	{ 0x7C, 0x82, 0xF2, 0xDA, 0xF2, 0x02, 0x3C, 0x00 },
	{ 0x18, 0x3C, 0x66, 0x66, 0x7E, 0x66, 0x66, 0x00 },
	{ 0x3E, 0x66, 0x66, 0x7E, 0xC6, 0xC6, 0x7E, 0x00 },
	{ 0x78, 0xCC, 0x06, 0x06, 0x06, 0xCC, 0x78, 0x00 },
	{ 0x3E, 0x66, 0xC6, 0xC6, 0xC6, 0x66, 0x3E, 0x00 },
	{ 0xFC, 0x0C, 0x0C, 0x7C, 0x0C, 0x0C, 0xFC, 0x00 },
	{ 0xFC, 0x0C, 0x0C, 0x7C, 0x0C, 0x0C, 0x0C, 0x00 },
	{ 0x78, 0xCC, 0x06, 0x06, 0xE6, 0xCC, 0xF8, 0x00 },
	{ 0x66, 0x66, 0x66, 0x7E, 0x66, 0x66, 0x66, 0x00 },
	{ 0x3C, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3C, 0x00 },
	{ 0x60, 0x60, 0x60, 0x60, 0x66, 0x66, 0x3C, 0x00 },
	{ 0xC6, 0x66, 0x36, 0x1E, 0x36, 0x66, 0xC6, 0x00 },
	{ 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0xFC, 0x00 },
	{ 0x82, 0xC6, 0xEE, 0xD6, 0xD6, 0xC6, 0xC6, 0x00 },
	{ 0xC6, 0xCE, 0xDA, 0xB6, 0xE6, 0xC6, 0x86, 0x00 },
	{ 0x38, 0x6C, 0xC6, 0xC6, 0xC6, 0x6C, 0x38, 0x00 },
	{ 0x7C, 0xCC, 0xCC, 0xCC, 0x7C, 0x0C, 0x0C, 0x00 },
	{ 0x38, 0x6C, 0xC6, 0xC6, 0xD6, 0x6C, 0x78, 0xC0 },
	{ 0x3E, 0x66, 0x66, 0x3E, 0x36, 0x66, 0xC6, 0x00 },
	{ 0x3C, 0x66, 0x0E, 0x38, 0x70, 0x66, 0x3C, 0x00 },
	{ 0x7E, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00 },
	{ 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x3C, 0x00 },
	{ 0x66, 0x66, 0x66, 0x66, 0x66, 0x3C, 0x18, 0x00 },
	{ 0xC6, 0xC6, 0xC6, 0xD6, 0xD6, 0x6C, 0x6C, 0x00 },
	{ 0xC6, 0xC6, 0x6C, 0x38, 0x6C, 0xC6, 0xC6, 0x00 },
	{ 0x66, 0x66, 0x66, 0x3C, 0x18, 0x18, 0x18, 0x00 },
	{ 0xFE, 0x60, 0x30, 0x18, 0x0C, 0x06, 0xFE, 0x00 },
	{ 0x3C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x3C, 0x00 },
	{ 0x06, 0x0C, 0x18, 0x30, 0x60, 0xC0, 0x80, 0x00 },
	{ 0x3C, 0x30, 0x30, 0x30, 0x30, 0x30, 0x3C, 0x00 },
	{ 0x10, 0x38, 0x6C, 0xC6, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF },
	{ 0x38, 0x18, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3C, 0x60, 0x7C, 0x66, 0x7C, 0x00 },
	{ 0x06, 0x06, 0x3E, 0x66, 0x66, 0x66, 0x3E, 0x00 },
	{ 0x00, 0x00, 0x3C, 0x66, 0x06, 0x66, 0x3C, 0x00 },
	{ 0x60, 0x60, 0x7C, 0x66, 0x66, 0x66, 0x7C, 0x00 },
	{ 0x00, 0x00, 0x3C, 0x66, 0x7E, 0x06, 0x3C, 0x00 },
	{ 0x38, 0x6C, 0x0C, 0x7E, 0x0C, 0x0C, 0x0C, 0x00 },
	{ 0x00, 0x00, 0x7C, 0x66, 0x66, 0x7C, 0x60, 0x3E },
	{ 0x06, 0x06, 0x3E, 0x66, 0x66, 0x66, 0x66, 0x00 },
	{ 0x18, 0x00, 0x1C, 0x18, 0x18, 0x18, 0x7E, 0x00 },
	{ 0x30, 0x00, 0x3C, 0x30, 0x30, 0x30, 0x36, 0x1C },
	{ 0x06, 0x06, 0x66, 0x36, 0x1E, 0x36, 0x66, 0x00 },
	{ 0x1C, 0x18, 0x18, 0x18, 0x18, 0x18, 0x7E, 0x00 },
	{ 0x00, 0x00, 0x66, 0xFE, 0xD6, 0xD6, 0xC6, 0x00 },
	{ 0x00, 0x00, 0x3E, 0x66, 0x66, 0x66, 0x66, 0x00 },
	{ 0x00, 0x00, 0x3C, 0x66, 0x66, 0x66, 0x3C, 0x00 },
	{ 0x00, 0x00, 0x3E, 0x66, 0x66, 0x66, 0x3E, 0x06 },
	{ 0x00, 0x00, 0x7C, 0x66, 0x66, 0x66, 0x7C, 0x60 },
	{ 0x00, 0x00, 0x76, 0xCC, 0x0C, 0x0C, 0x1E, 0x00 },
	{ 0x00, 0x00, 0x7C, 0x06, 0x3C, 0x60, 0x3E, 0x00 },
	{ 0x00, 0x0C, 0x7E, 0x0C, 0x0C, 0x6C, 0x38, 0x00 },
	{ 0x00, 0x00, 0x66, 0x66, 0x66, 0x66, 0x7C, 0x00 },
	{ 0x00, 0x00, 0x66, 0x66, 0x66, 0x3C, 0x18, 0x00 },
	{ 0x00, 0x00, 0xC6, 0xD6, 0xD6, 0x6C, 0x6C, 0x00 },
	{ 0x00, 0x00, 0xC6, 0x6C, 0x38, 0x6C, 0xC6, 0x00 },
	{ 0x00, 0x00, 0x66, 0x66, 0x66, 0x3C, 0x18, 0x0E },
	{ 0x00, 0x00, 0x7E, 0x30, 0x18, 0x0C, 0x7E, 0x00 },
	{ 0x70, 0x18, 0x18, 0x0E, 0x18, 0x18, 0x70, 0x00 },
	{ 0x18, 0x18, 0x18, 0x00, 0x18, 0x18, 0x18, 0x00 },
	{ 0x0E, 0x18, 0x18, 0x70, 0x18, 0x18, 0x0E, 0x00 },
	{ 0x8C, 0x92, 0x62, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x10, 0x38, 0x6C, 0xC6, 0xC6, 0xC6, 0xFE, 0x00 },
	{ 0x78, 0xCC, 0x06, 0x06, 0xCC, 0x78, 0x60, 0x38 },
	{ 0x66, 0x00, 0x66, 0x66, 0x66, 0x66, 0x7C, 0x00 },
	{ 0x60, 0x30, 0x00, 0x3C, 0x76, 0x06, 0x3C, 0x00 },
	{ 0x18, 0x66, 0x00, 0x3C, 0x60, 0x6E, 0x7C, 0x00 },
	{ 0x66, 0x00, 0x3C, 0x60, 0x7C, 0x66, 0x7C, 0x00 },
	{ 0x0C, 0x18, 0x00, 0x3C, 0x60, 0x6E, 0x7C, 0x00 },
	{ 0x3C, 0x66, 0x3C, 0x60, 0x7C, 0x66, 0x7C, 0x00 },
	{ 0x00, 0x00, 0x7C, 0x06, 0x06, 0x7C, 0x30, 0x1C },
	{ 0x18, 0x66, 0x00, 0x3C, 0x76, 0x06, 0x3C, 0x00 },
	{ 0x66, 0x00, 0x3C, 0x66, 0x7E, 0x06, 0x3C, 0x00 },
	{ 0x0C, 0x18, 0x00, 0x3C, 0x76, 0x06, 0x3C, 0x00 },
	{ 0x66, 0x00, 0x1C, 0x18, 0x18, 0x18, 0x7E, 0x00 },
	{ 0x18, 0x66, 0x00, 0x1C, 0x18, 0x18, 0x7E, 0x00 },
	{ 0x06, 0x0C, 0x00, 0x1C, 0x18, 0x18, 0x7E, 0x00 },
	{ 0x66, 0x18, 0x3C, 0x66, 0x66, 0x7E, 0x66, 0x00 },
	{ 0x3C, 0x66, 0x3C, 0x66, 0x66, 0x7E, 0x66, 0x00 },
	{ 0xC0, 0x60, 0xFC, 0x0C, 0x7C, 0x0C, 0xFC, 0x00 },
	{ 0x00, 0x00, 0x6E, 0x90, 0xFC, 0x12, 0xEE, 0x00 },
	{ 0xF8, 0x6C, 0x66, 0xFE, 0x66, 0x66, 0xE6, 0x00 },
	{ 0x18, 0x66, 0x00, 0x3C, 0x66, 0x66, 0x3C, 0x00 },
	{ 0x66, 0x00, 0x3C, 0x66, 0x66, 0x66, 0x3C, 0x00 },
	{ 0x0C, 0x18, 0x00, 0x3C, 0x66, 0x66, 0x3C, 0x00 },
	{ 0x18, 0x66, 0x00, 0x66, 0x66, 0x66, 0x7C, 0x00 },
	{ 0x0C, 0x18, 0x00, 0x66, 0x66, 0x66, 0x7C, 0x00 },
	{ 0x66, 0x00, 0x66, 0x66, 0x66, 0x3C, 0x18, 0x0E },
	{ 0xC6, 0x38, 0x6C, 0xC6, 0xC6, 0x6C, 0x38, 0x00 },
	{ 0x66, 0x00, 0x66, 0x66, 0x66, 0x66, 0x3C, 0x00 },
	{ 0x00, 0x60, 0x3C, 0x66, 0x7E, 0x66, 0x3C, 0x06 },
	{ 0x38, 0x6C, 0x0C, 0x3E, 0x0C, 0x04, 0x7E, 0x00 },
	{ 0xB8, 0x6C, 0xE6, 0xD6, 0xCE, 0x6C, 0x3A, 0x00 },
	{ 0x00, 0x42, 0x3C, 0x24, 0x24, 0x3C, 0x42, 0x00 },
	{ 0x70, 0x18, 0x18, 0x7E, 0x18, 0x18, 0x0E, 0x00 },
	{ 0x60, 0x30, 0x00, 0x3C, 0x60, 0x6E, 0x7C, 0x00 },
	{ 0x30, 0x18, 0x00, 0x1C, 0x18, 0x18, 0x7E, 0x00 },
	{ 0x60, 0x30, 0x00, 0x3C, 0x66, 0x66, 0x3C, 0x00 },
	{ 0x60, 0x30, 0x00, 0x66, 0x66, 0x66, 0x7C, 0x00 },
	{ 0x4E, 0x72, 0x00, 0x3E, 0x66, 0x66, 0x66, 0x00 },
	{ 0x98, 0x64, 0xCE, 0xDA, 0xB6, 0xE6, 0xC6, 0x00 },
	{ 0x3C, 0x60, 0x7C, 0x66, 0x7C, 0x00, 0x7E, 0x00 },
	{ 0x3C, 0x66, 0x66, 0x66, 0x3C, 0x00, 0x7E, 0x00 },
	{ 0x00, 0x18, 0x00, 0x18, 0x0C, 0x06, 0x66, 0x3C },
	{ 0x77, 0x33, 0x66, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0xEE, 0xCC, 0x66, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x30, 0x18, 0x0C, 0x18, 0x30, 0x00 },
	{ 0x00, 0x00, 0x0C, 0x18, 0x30, 0x18, 0x0C, 0x00 },
	{ 0x00, 0x18, 0x00, 0x18, 0x18, 0x3C, 0x3C, 0x18 },
	{ 0x00, 0x00, 0xCC, 0x66, 0x33, 0x66, 0xCC, 0x00 },
	{ 0x00, 0x00, 0x33, 0x66, 0xCC, 0x66, 0x33, 0x00 },
	{ 0x4E, 0x72, 0x00, 0x3C, 0x60, 0x6E, 0x7C, 0x00 },
	{ 0x4E, 0x72, 0x00, 0x3C, 0x66, 0x66, 0x3C, 0x00 },
	{ 0x66, 0x66, 0x3C, 0x18, 0x7E, 0x18, 0x18, 0x00 },
	{ 0x00, 0x30, 0x7C, 0x06, 0x06, 0x7C, 0x30, 0x00 },
	{ 0x00, 0x00, 0x6C, 0x92, 0xF2, 0x12, 0xEC, 0x00 },
	{ 0xFC, 0x66, 0x66, 0xE6, 0x66, 0x66, 0xFC, 0x00 },
	{ 0x06, 0x0C, 0x3C, 0x66, 0x66, 0x7E, 0x66, 0x00 },
	{ 0x4C, 0x32, 0x3C, 0x66, 0x66, 0x7E, 0x66, 0x00 },
	{ 0x9C, 0x72, 0x38, 0x6C, 0xC6, 0x6C, 0x38, 0x00 },
	{ 0x44, 0x18, 0x6C, 0xC6, 0x6C, 0x70, 0xC6, 0x7C },
	{ 0x18, 0x18, 0x7E, 0x18, 0x7E, 0x18, 0x18, 0x00 },
	{ 0x18, 0x18, 0x7E, 0x18, 0x18, 0x18, 0x18, 0x00 },
	{ 0xFC, 0x7E, 0x7E, 0x7C, 0x60, 0x60, 0x60, 0x00 },
	{ 0x7E, 0x81, 0xB9, 0x8D, 0x8D, 0xB9, 0x81, 0x7E },
	{ 0x7E, 0x81, 0x9D, 0xA5, 0x9D, 0xA5, 0x81, 0x7E },
	{ 0xDF, 0xAA, 0x8A, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x77, 0x66, 0x33 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0xDB, 0xDB, 0x00 },
	{ 0x00, 0x63, 0x33, 0x18, 0x0C, 0x06, 0xDB, 0xD8 },
	{ 0x00, 0x00, 0x18, 0x3C, 0x3C, 0x18, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x7E, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x1C, 0x14, 0x1C, 0x00, 0x00, 0x00, 0x00 },
	{ 0x30, 0x18, 0x3C, 0x66, 0x66, 0x7E, 0x66, 0x00 },
	{ 0x18, 0x3C, 0x3C, 0x66, 0x66, 0x7E, 0x66, 0x00 },
	{ 0x18, 0x30, 0xFC, 0x0C, 0x7C, 0x0C, 0xFC, 0x00 },
	{ 0x10, 0x28, 0xFC, 0x0C, 0x7C, 0x0C, 0xFC, 0x00 },
	{ 0x48, 0x00, 0xFC, 0x0C, 0x7C, 0x0C, 0xFC, 0x00 },
	{ 0x0C, 0x18, 0x3C, 0x18, 0x18, 0x18, 0x3C, 0x00 },
	{ 0x30, 0x18, 0x3C, 0x18, 0x18, 0x18, 0x3C, 0x00 },
	{ 0x18, 0x24, 0x3C, 0x18, 0x18, 0x18, 0x3C, 0x00 },
	{ 0x24, 0x00, 0x3C, 0x18, 0x18, 0x18, 0x3C, 0x00 },
	{ 0x0C, 0x18, 0x3C, 0x42, 0x42, 0x42, 0x3C, 0x00 },
	{ 0x30, 0x18, 0x3C, 0x42, 0x42, 0x42, 0x3C, 0x00 },
	{ 0x18, 0x24, 0x3C, 0x42, 0x42, 0x42, 0x3C, 0x00 },
	{ 0x14, 0x08, 0x3E, 0x02, 0x3E, 0x20, 0x3E, 0x00 },
	{ 0x14, 0x08, 0x3E, 0x02, 0x3E, 0x20, 0x3E, 0x00 },
	{ 0x0C, 0x18, 0x66, 0x66, 0x66, 0x66, 0x3C, 0x00 },
	{ 0x30, 0x18, 0x66, 0x66, 0x66, 0x66, 0x3C, 0x00 },
	{ 0x18, 0x24, 0x66, 0x66, 0x66, 0x66, 0x3C, 0x00 },
	{ 0x24, 0x00, 0x66, 0x66, 0x3C, 0x18, 0x18, 0x00 },
	{ 0x3C, 0x66, 0x36, 0x66, 0x66, 0x3E, 0x06, 0x06 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0xDC, 0x76, 0x26, 0x76, 0xDC, 0x00 },
	{ 0x3C, 0x66, 0x36, 0x66, 0x66, 0x3E, 0x06, 0x06 },
	{ 0xFE, 0xC6, 0x06, 0x06, 0x06, 0x06, 0x06, 0x00 },
	{ 0x00, 0x00, 0xFE, 0x6C, 0x6C, 0x6C, 0xCC, 0x00 },
	{ 0xFE, 0x0C, 0x18, 0x30, 0x18, 0x0C, 0xFE, 0x00 },
	{ 0x00, 0x00, 0xFC, 0x26, 0x66, 0x66, 0x3C, 0x00 },
	{ 0x00, 0x00, 0x66, 0x66, 0x66, 0x3E, 0x06, 0x03 },
	{ 0x00, 0x00, 0xFE, 0x18, 0x18, 0x18, 0x70, 0x00 },
	{ 0x3C, 0x18, 0x7E, 0xDB, 0x7E, 0x18, 0x3C, 0x00 },
	{ 0x38, 0x6C, 0xC6, 0xFE, 0xC6, 0x6C, 0x38, 0x00 },
	{ 0x7C, 0xC6, 0xC6, 0xC6, 0xC6, 0x6C, 0xEE, 0x00 },
	{ 0x70, 0x18, 0x30, 0x7C, 0x66, 0x66, 0x3C, 0x00 },
	{ 0x70, 0x18, 0x7E, 0xDB, 0xDB, 0x7E, 0x18, 0x0E },
	{ 0x18, 0x18, 0x7E, 0xDB, 0xDB, 0x7E, 0x18, 0x18 },
	{ 0x78, 0x0C, 0x06, 0x7E, 0x06, 0x0C, 0x78, 0x00 },
	{ 0x3C, 0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x00 },
	{ 0x00, 0x7E, 0x00, 0x7E, 0x00, 0x7E, 0x00, 0x00 },
	{ 0x18, 0x18, 0x7E, 0x18, 0x18, 0x00, 0x7E, 0x00 },
	{ 0x0C, 0x18, 0x70, 0x18, 0x0C, 0x00, 0x7E, 0x00 },
	{ 0x30, 0x18, 0x0E, 0x18, 0x30, 0x00, 0x7E, 0x00 },
	{ 0x70, 0xD8, 0xD8, 0x18, 0x18, 0x18, 0x18, 0x18 },
	{ 0x18, 0x18, 0x18, 0x18, 0x18, 0x1B, 0x1B, 0x0E },
	{ 0x18, 0x18, 0x00, 0x7E, 0x00, 0x18, 0x18, 0x00 },
	{ 0x00, 0x9C, 0x72, 0x00, 0x9C, 0x72, 0x00, 0x00 },
	{ 0x38, 0x6C, 0x6C, 0x38, 0x00, 0x00, 0x00, 0x00 },
	{ 0x38, 0x7C, 0x7C, 0x38, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00 },
	{ 0xE0, 0x20, 0x20, 0x22, 0x27, 0x2C, 0x38, 0x30 },
	{ 0x3C, 0x6C, 0x6C, 0x6C, 0x6C, 0x00, 0x00, 0x00 },
	{ 0x3C, 0x60, 0x38, 0x0C, 0x7C, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3C, 0x3C, 0x3C, 0x3C, 0x00, 0x00 },
	{ 0xB8, 0x6C, 0xE6, 0xD6, 0xCE, 0x6C, 0x3A, 0x00 }
};

static font_t font_8x8 = {8, 8, (unsigned char *)font_8x8_bitmap};

/*
 *
 * 8x14 font
 *
 */

static unsigned char font_8x14_bitmap[256][14] = {
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x10, 0x38, 0x7C, 0xFE, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0x00, 0x00 },
	{ 0x00, 0x00, 0x38, 0x38, 0x38, 0x38, 0x38, 0x38, 0xFE, 0x7C, 0x38, 0x10, 0x00, 0x00 },
	{ 0x00, 0x00, 0x08, 0x18, 0x38, 0x7F, 0xFF, 0x7F, 0x38, 0x18, 0x08, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x10, 0x18, 0x1C, 0xFE, 0xFF, 0xFE, 0x1C, 0x18, 0x10, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0x00, 0x00 },
	{ 0x00, 0x00, 0x1F, 0x1F, 0x1F, 0x1F, 0x1F, 0x1F, 0x9F, 0xA0, 0xC0, 0xF0, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x08, 0x1C, 0x3E, 0x7F, 0x3E, 0x1C, 0x08, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0xC0, 0xC0, 0x60, 0x60, 0x33, 0x33, 0x36, 0x1C, 0x18, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x3C, 0x42, 0x89, 0xF1, 0x81, 0x42, 0x3C, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x18, 0x24, 0x42, 0x42, 0x42, 0x42, 0xFF, 0x08, 0x0C, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0xF0, 0x70, 0x10, 0x10, 0x10, 0x10, 0x1E, 0x0F, 0x06, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x38, 0x7C, 0xFE, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0xFE, 0x7C, 0x38, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x04, 0x0C, 0x1C, 0x3C, 0x1C, 0x0C, 0x04, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x20, 0x30, 0x38, 0x3C, 0x38, 0x30, 0x20, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x02, 0x06, 0x0E, 0x3E, 0xFE, 0x3E, 0x0E, 0x06, 0x02, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x80, 0xC0, 0xE0, 0xF8, 0xFE, 0xF8, 0xE0, 0xC0, 0x80, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x81, 0xC3, 0xE7, 0xFF, 0xE7, 0xC3, 0x81, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFE, 0xFE, 0xFE, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0xFE, 0xDB, 0xDB, 0xDB, 0xDA, 0xD8, 0xD8, 0xD8, 0xD8, 0x00, 0x00, 0x00 },
	{ 0x00, 0x7C, 0xC6, 0x0C, 0x38, 0x6C, 0xC6, 0xC6, 0x6C, 0x38, 0x60, 0xC6, 0x7C, 0x00 },
	{ 0x00, 0x00, 0x18, 0x3C, 0x7E, 0x18, 0x18, 0x18, 0x7E, 0x3C, 0x18, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x18, 0x3C, 0x7E, 0x18, 0x18, 0x18, 0x7E, 0x3C, 0x18, 0x7E, 0x00, 0x00 },
	{ 0x00, 0x00, 0x18, 0x3C, 0x7E, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x7E, 0x3C, 0x18, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x30, 0x60, 0xFE, 0x60, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x18, 0x0C, 0xFE, 0x0C, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x06, 0x06, 0x06, 0xFE, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x24, 0x66, 0xFF, 0x66, 0x24, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x3C, 0x3C, 0x7E, 0x7E, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x7E, 0x7E, 0x3C, 0x3C, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x18, 0x3C, 0x3C, 0x18, 0x18, 0x18, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x66, 0x66, 0x66, 0x24, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x22, 0x22, 0x7F, 0x22, 0x22, 0x7F, 0x22, 0x22, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x08, 0x08, 0x3E, 0x6B, 0x0B, 0x3E, 0x68, 0x6B, 0x3E, 0x08, 0x08, 0x00, 0x00 },
	{ 0x00, 0x00, 0x06, 0x49, 0x29, 0x16, 0x08, 0x34, 0x4A, 0x49, 0x30, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x1E, 0x33, 0x33, 0x1B, 0x0E, 0x5B, 0x33, 0x33, 0x6E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x1C, 0x18, 0x18, 0x0C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x30, 0x18, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x18, 0x30, 0x00, 0x00 },
	{ 0x00, 0x00, 0x06, 0x0C, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x0C, 0x06, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x36, 0x1C, 0x7F, 0x1C, 0x36, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x7E, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1C, 0x18, 0x18, 0x0C, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00 },
	{ 0x00, 0x60, 0x20, 0x30, 0x10, 0x18, 0x08, 0x0C, 0x04, 0x06, 0x02, 0x03, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3E, 0x63, 0x63, 0x73, 0x6B, 0x67, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x18, 0x1C, 0x1E, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3E, 0x63, 0x63, 0x60, 0x38, 0x0E, 0x03, 0x03, 0x7F, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3E, 0x63, 0x60, 0x60, 0x3C, 0x60, 0x60, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x30, 0x38, 0x3C, 0x36, 0x33, 0x33, 0x7F, 0x30, 0x30, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x7F, 0x03, 0x03, 0x3F, 0x60, 0x60, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x30, 0x18, 0x0C, 0x06, 0x3F, 0x63, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x7F, 0x60, 0x60, 0x30, 0x18, 0x0C, 0x06, 0x06, 0x06, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3E, 0x63, 0x63, 0x63, 0x3E, 0x63, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3E, 0x63, 0x63, 0x63, 0x7E, 0x30, 0x18, 0x0C, 0x06, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00, 0x1C, 0x18, 0x18, 0x0C, 0x00 },
	{ 0x00, 0x00, 0x30, 0x18, 0x0C, 0x06, 0x03, 0x06, 0x0C, 0x18, 0x30, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0x00, 0x7F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x06, 0x0C, 0x18, 0x30, 0x60, 0x30, 0x18, 0x0C, 0x06, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3C, 0x66, 0x66, 0x30, 0x18, 0x18, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3E, 0x61, 0x79, 0x6D, 0x6D, 0x6D, 0x79, 0x01, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x1C, 0x36, 0x63, 0x63, 0x63, 0x7F, 0x63, 0x63, 0x63, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3F, 0x66, 0x66, 0x66, 0x3E, 0x66, 0x66, 0x66, 0x3F, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3E, 0x63, 0x63, 0x03, 0x03, 0x03, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x1F, 0x36, 0x66, 0x66, 0x66, 0x66, 0x66, 0x36, 0x1F, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x7E, 0x06, 0x06, 0x06, 0x3E, 0x06, 0x06, 0x06, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x7E, 0x06, 0x06, 0x06, 0x3E, 0x06, 0x06, 0x06, 0x06, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3E, 0x63, 0x03, 0x03, 0x7B, 0x63, 0x63, 0x63, 0x5E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x63, 0x63, 0x63, 0x63, 0x7F, 0x63, 0x63, 0x63, 0x63, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3C, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3C, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x60, 0x60, 0x60, 0x60, 0x60, 0x63, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x63, 0x63, 0x33, 0x1B, 0x0F, 0x1B, 0x33, 0x63, 0x63, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x41, 0x63, 0x77, 0x6B, 0x6B, 0x6B, 0x63, 0x63, 0x63, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x63, 0x67, 0x6F, 0x7B, 0x73, 0x63, 0x63, 0x63, 0x63, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3E, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3F, 0x63, 0x63, 0x63, 0x63, 0x3F, 0x03, 0x03, 0x03, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3E, 0x63, 0x63, 0x63, 0x63, 0x63, 0x6F, 0x3B, 0x3E, 0x60, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3F, 0x63, 0x63, 0x63, 0x3F, 0x1B, 0x33, 0x33, 0x63, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3E, 0x63, 0x63, 0x06, 0x1C, 0x30, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x7E, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x36, 0x1C, 0x08, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x63, 0x63, 0x6B, 0x6B, 0x6B, 0x6B, 0x36, 0x36, 0x22, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x63, 0x63, 0x63, 0x36, 0x1C, 0x36, 0x63, 0x63, 0x63, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x63, 0x63, 0x63, 0x63, 0x36, 0x1C, 0x0C, 0x0C, 0x0C, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x7F, 0x60, 0x30, 0x18, 0x0C, 0x06, 0x03, 0x03, 0x7F, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x0C, 0x3C, 0x00, 0x00 },
	{ 0x00, 0x03, 0x02, 0x06, 0x04, 0x0C, 0x08, 0x18, 0x10, 0x30, 0x20, 0x60, 0x00, 0x00 },
	{ 0x00, 0x00, 0x1E, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x1E, 0x00, 0x00 },
	{ 0x00, 0x08, 0x1C, 0x36, 0x63, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x00 },
	{ 0x00, 0x00, 0x1C, 0x0C, 0x0C, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x60, 0x7E, 0x63, 0x63, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x03, 0x03, 0x03, 0x3B, 0x67, 0x63, 0x63, 0x63, 0x3F, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x63, 0x03, 0x03, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x60, 0x60, 0x60, 0x7E, 0x63, 0x63, 0x63, 0x73, 0x6E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x63, 0x7F, 0x03, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x78, 0xCC, 0x0C, 0x0C, 0x7E, 0x0C, 0x0C, 0x0C, 0x0C, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x7E, 0x63, 0x63, 0x73, 0x6E, 0x60, 0x63, 0x3E, 0x00 },
	{ 0x00, 0x00, 0x03, 0x03, 0x03, 0x3B, 0x67, 0x63, 0x63, 0x63, 0x63, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x18, 0x18, 0x00, 0x1E, 0x18, 0x18, 0x18, 0x18, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x30, 0x30, 0x00, 0x3C, 0x30, 0x30, 0x30, 0x30, 0x30, 0x33, 0x1E, 0x00 },
	{ 0x00, 0x00, 0x03, 0x03, 0x03, 0x63, 0x33, 0x1B, 0x1F, 0x33, 0x63, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x1E, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x37, 0x6B, 0x6B, 0x6B, 0x6B, 0x63, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x3B, 0x67, 0x63, 0x63, 0x63, 0x63, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x63, 0x63, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x3B, 0x67, 0x63, 0x63, 0x63, 0x3F, 0x03, 0x03, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x7E, 0x63, 0x63, 0x63, 0x73, 0x6E, 0x60, 0x60, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x3B, 0x67, 0x63, 0x03, 0x03, 0x03, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x63, 0x0E, 0x38, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x06, 0x06, 0x3F, 0x06, 0x06, 0x06, 0x66, 0x3C, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x63, 0x63, 0x63, 0x63, 0x73, 0x6E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x63, 0x63, 0x63, 0x36, 0x1C, 0x08, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x63, 0x63, 0x6B, 0x6B, 0x36, 0x22, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x63, 0x36, 0x1C, 0x1C, 0x36, 0x63, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x63, 0x63, 0x63, 0x36, 0x1C, 0x0C, 0x06, 0x03, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0x30, 0x18, 0x0C, 0x06, 0x7F, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x38, 0x0C, 0x0C, 0x0C, 0x07, 0x04, 0x0C, 0x0C, 0x0C, 0x38, 0x00, 0x00 },
	{ 0x00, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00, 0x00 },
	{ 0x00, 0x00, 0x0E, 0x18, 0x18, 0x18, 0x70, 0x10, 0x18, 0x18, 0x18, 0x0E, 0x00, 0x00 },
	{ 0x00, 0x00, 0x6E, 0x3B, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x08, 0x1C, 0x36, 0x63, 0x63, 0x63, 0x63, 0x63, 0x7F, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3E, 0x63, 0x63, 0x03, 0x03, 0x03, 0x63, 0x63, 0x3E, 0x08, 0x0E, 0x00 },
	{ 0x00, 0x00, 0x36, 0x36, 0x00, 0x63, 0x63, 0x63, 0x63, 0x73, 0x6E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x60, 0x30, 0x18, 0x00, 0x3E, 0x63, 0x7F, 0x03, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x08, 0x1C, 0x36, 0x00, 0x3E, 0x60, 0x7E, 0x63, 0x63, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x36, 0x36, 0x00, 0x3E, 0x60, 0x7E, 0x63, 0x63, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x06, 0x0C, 0x18, 0x00, 0x3E, 0x60, 0x7E, 0x63, 0x63, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x1C, 0x22, 0x22, 0x1C, 0x00, 0x3E, 0x60, 0x7E, 0x63, 0x63, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x63, 0x03, 0x03, 0x63, 0x3E, 0x08, 0x0E, 0x00 },
	{ 0x00, 0x08, 0x1C, 0x36, 0x00, 0x3E, 0x63, 0x7F, 0x03, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x36, 0x36, 0x00, 0x3E, 0x63, 0x7F, 0x03, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x06, 0x0C, 0x18, 0x00, 0x3E, 0x63, 0x7F, 0x03, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x36, 0x36, 0x00, 0x1E, 0x18, 0x18, 0x18, 0x18, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x08, 0x1C, 0x36, 0x00, 0x1E, 0x18, 0x18, 0x18, 0x18, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x06, 0x0C, 0x18, 0x00, 0x1E, 0x18, 0x18, 0x18, 0x18, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x63, 0x63, 0x00, 0x1C, 0x36, 0x63, 0x63, 0x7F, 0x63, 0x63, 0x63, 0x00, 0x00, 0x00 },
	{ 0x1C, 0x22, 0x22, 0x1C, 0x36, 0x63, 0x63, 0x7F, 0x63, 0x63, 0x63, 0x00, 0x00, 0x00 },
	{ 0x70, 0x18, 0x00, 0x7E, 0x06, 0x06, 0x3E, 0x06, 0x06, 0x06, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x68, 0x7E, 0x0B, 0x0B, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x7C, 0x16, 0x13, 0x13, 0x7F, 0x13, 0x13, 0x13, 0x73, 0x00, 0x00, 0x00 },
	{ 0x00, 0x08, 0x1C, 0x36, 0x00, 0x3E, 0x63, 0x63, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x36, 0x36, 0x00, 0x3E, 0x63, 0x63, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x06, 0x0C, 0x18, 0x00, 0x3E, 0x63, 0x63, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x08, 0x1C, 0x36, 0x00, 0x63, 0x63, 0x63, 0x63, 0x73, 0x6E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x06, 0x0C, 0x18, 0x00, 0x63, 0x63, 0x63, 0x63, 0x73, 0x6E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x36, 0x36, 0x00, 0x63, 0x63, 0x63, 0x36, 0x1C, 0x0C, 0x06, 0x03, 0x00 },
	{ 0x63, 0x63, 0x00, 0x3E, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x36, 0x36, 0x00, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x60, 0x3E, 0x73, 0x7B, 0x6F, 0x67, 0x3E, 0x03, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3C, 0x66, 0x06, 0x06, 0x1F, 0x06, 0x06, 0x02, 0x7F, 0x00, 0x00, 0x00 },
	{ 0x00, 0x60, 0x3E, 0x63, 0x73, 0x7B, 0x6F, 0x67, 0x63, 0x63, 0x3E, 0x03, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x41, 0x3E, 0x22, 0x22, 0x22, 0x3E, 0x41, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x78, 0x0C, 0x0C, 0x0C, 0x3E, 0x0C, 0x0C, 0x0C, 0x0C, 0x07, 0x00, 0x00 },
	{ 0x00, 0x60, 0x30, 0x18, 0x00, 0x3E, 0x60, 0x7E, 0x63, 0x63, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x30, 0x18, 0x0C, 0x00, 0x1E, 0x18, 0x18, 0x18, 0x18, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x60, 0x30, 0x18, 0x00, 0x3E, 0x63, 0x63, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x60, 0x30, 0x18, 0x00, 0x63, 0x63, 0x63, 0x63, 0x73, 0x6E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x6E, 0x3B, 0x00, 0x00, 0x3B, 0x67, 0x63, 0x63, 0x63, 0x63, 0x00, 0x00, 0x00 },
	{ 0x6E, 0x3B, 0x00, 0x63, 0x67, 0x6F, 0x7B, 0x73, 0x63, 0x63, 0x63, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3C, 0x60, 0x7C, 0x66, 0x66, 0xDC, 0x00, 0x00, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3C, 0x66, 0x66, 0x66, 0x66, 0x3C, 0x00, 0x00, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x0C, 0x0C, 0x00, 0x0C, 0x0C, 0x06, 0x33, 0x33, 0x1E, 0x00 },
	{ 0x00, 0x00, 0x66, 0x33, 0x33, 0x77, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x77, 0x66, 0x66, 0x33, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x0C, 0x0C, 0x0C, 0x18, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x0C, 0x18, 0x18, 0x18, 0x0C, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x0C, 0x0C, 0x00, 0x0C, 0x0C, 0x0C, 0x1E, 0x1E, 0x0C, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x66, 0x33, 0x33, 0x33, 0x66, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x33, 0x66, 0x66, 0x66, 0x33, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x6E, 0x3B, 0x00, 0x3E, 0x60, 0x7E, 0x63, 0x63, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x6E, 0x3B, 0x00, 0x3E, 0x63, 0x63, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x63, 0x63, 0x63, 0x36, 0x7F, 0x0C, 0x7F, 0x0C, 0x0C, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x08, 0x08, 0x3E, 0x6B, 0x0B, 0x0B, 0x6B, 0x3E, 0x08, 0x08, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x6B, 0x7B, 0x0B, 0x0B, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x7E, 0x13, 0x13, 0x13, 0x73, 0x13, 0x13, 0x13, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x0E, 0x18, 0x00, 0x1C, 0x36, 0x63, 0x63, 0x7F, 0x63, 0x63, 0x63, 0x00, 0x00, 0x00 },
	{ 0x6E, 0x3B, 0x00, 0x1C, 0x36, 0x63, 0x63, 0x7F, 0x63, 0x63, 0x63, 0x00, 0x00, 0x00 },
	{ 0x6E, 0x3B, 0x00, 0x3E, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x1C, 0x12, 0x06, 0x0C, 0x12, 0x12, 0x0C, 0x18, 0x12, 0x0E, 0x00, 0x00 },
	{ 0x00, 0x00, 0x18, 0x18, 0x7E, 0x18, 0x18, 0x18, 0x7E, 0x18, 0x18, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x18, 0x18, 0x7E, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x7E, 0x3F, 0x3F, 0x3F, 0x3E, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x00 },
	{ 0x00, 0x00, 0x7E, 0x81, 0xB9, 0x8D, 0x8D, 0x8D, 0xB9, 0x81, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x7E, 0x81, 0xBD, 0xA5, 0xBD, 0x95, 0xA5, 0x81, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x8F, 0xDA, 0xAA, 0x8A, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x77, 0x66, 0x66, 0x33, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xDB, 0xDB, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x02, 0x05, 0x15, 0x0A, 0x04, 0x4A, 0xB5, 0xB4, 0x48, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x1C, 0x3E, 0x3E, 0x3E, 0x1C, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x18, 0x24, 0x24, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x38, 0x0C, 0x00, 0x1C, 0x36, 0x63, 0x63, 0x7F, 0x63, 0x63, 0x63, 0x00, 0x00, 0x00 },
	{ 0x08, 0x14, 0x22, 0x1C, 0x36, 0x63, 0x63, 0x7F, 0x63, 0x63, 0x63, 0x00, 0x00, 0x00 },
	{ 0x0E, 0x18, 0x00, 0x7E, 0x06, 0x06, 0x3E, 0x06, 0x06, 0x06, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x08, 0x14, 0x22, 0x7E, 0x06, 0x06, 0x3E, 0x06, 0x06, 0x06, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x36, 0x36, 0x00, 0x7E, 0x06, 0x06, 0x3E, 0x06, 0x06, 0x06, 0x7E, 0x00, 0x00, 0x00 },
	{ 0x0E, 0x18, 0x00, 0x3C, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3C, 0x00, 0x00, 0x00 },
	{ 0x70, 0x18, 0x00, 0x3C, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3C, 0x00, 0x00, 0x00 },
	{ 0x08, 0x14, 0x22, 0x3C, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3C, 0x00, 0x00, 0x00 },
	{ 0x36, 0x36, 0x00, 0x3C, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3C, 0x00, 0x00, 0x00 },
	{ 0x0E, 0x18, 0x00, 0x3E, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x38, 0x0C, 0x00, 0x3E, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x08, 0x14, 0x22, 0x3E, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x22, 0x14, 0x08, 0x3E, 0x63, 0x63, 0x06, 0x38, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x22, 0x14, 0x08, 0x00, 0x3E, 0x63, 0x0E, 0x38, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x0E, 0x18, 0x00, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x38, 0x0C, 0x00, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x08, 0x14, 0x22, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x36, 0x36, 0x00, 0x63, 0x63, 0x63, 0x36, 0x1C, 0x0C, 0x0C, 0x0C, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x1E, 0x33, 0x33, 0x13, 0x3B, 0x63, 0x63, 0x67, 0x3B, 0x03, 0x03, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x6E, 0x33, 0x33, 0x33, 0x33, 0x6E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x1E, 0x33, 0x33, 0x13, 0x3B, 0x63, 0x63, 0x67, 0x3B, 0x03, 0x03, 0x00 },
	{ 0x00, 0x00, 0x7F, 0x46, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x0F, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0x36, 0x36, 0x36, 0x36, 0x66, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x7F, 0x46, 0x0C, 0x18, 0x30, 0x18, 0x0C, 0x46, 0x7F, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0xFE, 0x33, 0x63, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x66, 0x66, 0x66, 0x66, 0x66, 0x3E, 0x06, 0x03, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0x0C, 0x0C, 0x0C, 0x0C, 0x38, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3C, 0x18, 0x7E, 0xDB, 0xDB, 0xDB, 0x7E, 0x18, 0x3C, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x1C, 0x36, 0x63, 0x63, 0x7F, 0x63, 0x63, 0x36, 0x1C, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3E, 0x63, 0x63, 0x63, 0x63, 0x63, 0x36, 0x36, 0x77, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x7C, 0x0C, 0x18, 0x30, 0x3E, 0x63, 0x63, 0x63, 0x3E, 0x00, 0x00, 0x00 },
	{ 0x00, 0x30, 0x08, 0x08, 0x3E, 0x6B, 0x6B, 0x6B, 0x6B, 0x3E, 0x08, 0x08, 0x06, 0x00 },
	{ 0x00, 0x00, 0x00, 0x08, 0x08, 0x3E, 0x6B, 0x6B, 0x6B, 0x6B, 0x3E, 0x08, 0x08, 0x00 },
	{ 0x00, 0x00, 0x7C, 0x06, 0x03, 0x03, 0x7F, 0x03, 0x03, 0x06, 0x7C, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3E, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x63, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x7F, 0x00, 0x7F, 0x00, 0x7F, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x18, 0x18, 0x7E, 0x18, 0x18, 0x00, 0x7E, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x06, 0x0C, 0x18, 0x30, 0x18, 0x0C, 0x06, 0x00, 0x7F, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x30, 0x18, 0x0C, 0x06, 0x0C, 0x18, 0x30, 0x00, 0x7F, 0x00, 0x00, 0x00 },
	{ 0x70, 0xD8, 0xD8, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18 },
	{ 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x1B, 0x1B, 0x0E },
	{ 0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x7E, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x6E, 0x3B, 0x00, 0x6E, 0x3B, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3C, 0x66, 0x66, 0x3C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x1C, 0x3E, 0x3E, 0x1C, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0xE0, 0x20, 0x20, 0x20, 0x20, 0x20, 0x22, 0x27, 0x2C, 0x38, 0x30, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3E, 0x66, 0x66, 0x66, 0x66, 0x66, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x3C, 0x66, 0x60, 0x3C, 0x06, 0x7E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00 },
	{ 0x00, 0x00, 0x00, 0x3C, 0x3C, 0x3C, 0x3C, 0x3C, 0x3C, 0x3C, 0x3C, 0x00, 0x00, 0x00 },
	{ 0x00, 0x60, 0x3E, 0x63, 0x73, 0x7B, 0x6F, 0x67, 0x63, 0x63, 0x3E, 0x03, 0x00, 0x00 }
};

static font_t font_8x14 = {8, 14, (unsigned char *)font_8x14_bitmap};

/*
 *
 * state
 *
 */

static struct {

	frame_t frames[EUI_MAX_FRAMES];
	int frame_index;
	int frame_z;

	drawcmd_t drawcmds[EUI_MAX_DRAWCMDS];
	int num_drawcmds;
	int drawcmds_order[EUI_MAX_DRAWCMDS];

	int w;
	int h;
	int bpp;
	int pitch;
	void *buffer;

	font_t *font;
	int fontnum;

	void (*set_pixel)(int x, int y, unsigned int color);
	void (*set_box)(int x, int y, int w, int h, unsigned int color);
	void (*set_glyph)(int x, int y, unsigned int glyph, unsigned int color, font_t *font);
	void (*set_bitmap)(int x, int y, int w, int h, int bpp, int pitch, void *pixels);
} state;

/*
 *
 * private functions
 *
 */

static void set_pixel_1(int x, int y, unsigned int color)
{
	unsigned char *ofs;
	unsigned int shift, mask;

	/* get buffer offset */
	ofs = &((unsigned char *)state.buffer)[y * state.pitch + (x >> 3)];

	/* get shift and mask */
	shift = ~x & 7;
	mask = 0x1 << shift;

	/* OR the color in at ofs */
	*ofs = (*ofs & ~mask) | ((color & 0x1) << shift);
}

static void set_box_1(int x, int y, int w, int h, unsigned int color)
{
	int xx, yy;
	void *ptr;

	for (yy = y; yy < y + h; yy++)
	{
		if (x % 8 || w % 8)
		{
			/* not aligned */
			for (xx = x; xx < x + w; xx++)
				state.set_pixel(xx, yy, color);
		}
		else
		{
			/* aligned */
			ptr = &((unsigned char *)state.buffer)[yy * state.pitch + (x >> 3)];
			if (color)
				memset(ptr, 0xFF, w / 8);
			else
				memset(ptr, 0x00, w / 8);
		}
	}
}

static void set_pixel_2(int x, int y, unsigned int color)
{
	unsigned char *ofs;
	unsigned int shift, mask;

	/* get buffer offset */
	ofs = &((unsigned char *)state.buffer)[y * state.pitch + (x >> 2)];

	/* get shift and mask */
	shift = 6 - (2 * (x % 4));
	mask = 0x3 << shift;

	/* OR the color in at ofs */
	*ofs = (*ofs & ~mask) | ((color & 0x3) << shift);
}

static void set_box_2(int x, int y, int w, int h, unsigned int color)
{
	int xx, yy;
	void *ptr;

	for (yy = y; yy < y + h; yy++)
	{
		if (x % 4 || w % 4)
		{
			/* not aligned */
			for (xx = x; xx < x + w; xx++)
				state.set_pixel(xx, yy, color);
		}
		else
		{
			/* aligned */
			ptr = &((unsigned char *)state.buffer)[yy * state.pitch + (x >> 2)];
			color = color << 6 | color << 4 | color << 2 | color;
			memset(ptr, color, w / 4);
		}
	}
}

static void set_pixel_4(int x, int y, unsigned int color)
{
	unsigned char *ofs;
	unsigned int shift, mask;

	/* get buffer offset */
	ofs = &((unsigned char *)state.buffer)[y * state.pitch + (x >> 1)];

	/* get shift and mask */
	shift = 4 - (4 * (x % 2));
	mask = 0xF << shift;

	/* OR the color in at ofs */
	*ofs = (*ofs & ~mask) | ((color & 0xF) << shift);
}

static void set_box_4(int x, int y, int w, int h, unsigned int color)
{
	int xx, yy;
	void *ptr;

	for (yy = y; yy < y + h; yy++)
	{
		if (x % 2 || w % 2)
		{
			/* not aligned */
			for (xx = x; xx < x + w; xx++)
				state.set_pixel(xx, yy, color);
		}
		else
		{
			/* aligned */
			ptr = &((unsigned char *)state.buffer)[yy * state.pitch + (x >> 1)];
			color = color << 4 | color;
			memset(ptr, color, w / 2);
		}
	}
}

static void set_pixel_8(int x, int y, unsigned int color)
{
	((unsigned char *)state.buffer)[y * state.pitch + x] = color;
}

static void set_box_8(int x, int y, int w, int h, unsigned int color)
{
	int yy;

	for (yy = y; yy < y + h; yy++)
	{
		memset(&((unsigned char *)state.buffer)[yy * state.pitch + x], color, w);
	}
}

static void set_glyph_font_bitmap(int x, int y, unsigned int glyph, unsigned int color, font_t *font)
{
	int xx, yy, xxx, yyy;
	unsigned char *bitmap;

	if (glyph >= 256)
		return;

	bitmap = &font->bitmap[glyph * font->glyph_h];

	for (yy = 0; yy < font->glyph_h; yy++)
	{
		for (xx = 0; xx < font->glyph_w; xx++)
		{
			if (bitmap[yy] & 1 << xx)
			{
				xxx = x + xx;
				yyy = y + yy;

				if (xxx < 0 || xxx >= state.w)
					continue;
				if (yyy < 0 || yyy >= state.h)
					continue;

				state.set_pixel(xxx, yyy, color);
			}
		}
	}
}

void set_bitmap_1(int x, int y, int w, int h, int bpp, int pitch, void *pixels)
{
	EUI_UNUSED(x);
	EUI_UNUSED(y);
	EUI_UNUSED(w);
	EUI_UNUSED(h);
	EUI_UNUSED(bpp);
	EUI_UNUSED(pitch);
	EUI_UNUSED(pixels);
}

void set_bitmap_2(int x, int y, int w, int h, int bpp, int pitch, void *pixels)
{
	EUI_UNUSED(x);
	EUI_UNUSED(y);
	EUI_UNUSED(w);
	EUI_UNUSED(h);
	EUI_UNUSED(bpp);
	EUI_UNUSED(pitch);
	EUI_UNUSED(pixels);
}

void set_bitmap_4(int x, int y, int w, int h, int bpp, int pitch, void *pixels)
{
	EUI_UNUSED(x);
	EUI_UNUSED(y);
	EUI_UNUSED(w);
	EUI_UNUSED(h);
	EUI_UNUSED(bpp);
	EUI_UNUSED(pitch);
	EUI_UNUSED(pixels);
}

void set_bitmap_8(int x, int y, int w, int h, int bpp, int pitch, void *pixels)
{
	int yy;
	void *src, *dst;

	EUI_UNUSED(bpp);

	for (yy = y; yy < y + h; yy++)
	{
		src = (char *)pixels + ((yy - y) * pitch);
		dst = (char *)state.buffer + (yy * state.pitch + x);
		memcpy(dst, src, w);
	}
}

/* clip box to arbitrary size, returns EUI_TRUE if the shape will be completely clipped */
static int eui_clip_box_lower(int *x, int *y, int *w, int *h, int cx, int cy, int cw, int ch)
{
	int start_x, start_y, end_x, end_y;

	start_x = cx;
	start_y = cy;
	end_x = cx + cw;
	end_y = cy + ch;

	/* it will never become visible */
	if (*x >= end_x)
		return EUI_TRUE;
	if (*y >= end_y)
		return EUI_TRUE;
	if (*x + *w < start_x)
		return EUI_TRUE;
	if (*y + *h < start_y)
		return EUI_TRUE;

	/* clip to top edge */
	if (*y < start_y)
	{
		*h += *y - start_y;
		*y = start_y;
	}

	/* clip to bottom edge */
	if (*y + *h >= end_y)
	{
		*h = end_y - *y;
	}

	/* clip to left edge */
	if (*x < start_x)
	{
		*w += *x - start_x;
		*x = start_x;
	}

	/* clip to right edge */
	if (*x + *w >= end_x)
	{
		*w = end_x - *x;
	}

	return EUI_FALSE;
}

/* push drawcmd to stack */
static void eui_drawcmd_push(drawcmd_t *drawcmd)
{
	if (state.num_drawcmds == EUI_MAX_DRAWCMDS - 1)
		return;

	/* set up ordering info */
	drawcmd->z = state.frames[state.frame_index].z * EUI_MAX_FRAMES;
	drawcmd->z += state.frames[state.frame_index].num_drawcmds++;

	/* copy current drawcmd to queue */
	memcpy(&state.drawcmds[state.num_drawcmds++], drawcmd, sizeof(drawcmd_t));
}

/* compare function for sorting drawcmds */
static int eui_drawcmd_compare(const void *a, const void *b)
{
	/* compare z values */
	return state.drawcmds[*(int *)a].z - state.drawcmds[*(int *)b].z;
}

/*
 *
 * public functions
 *
 */

/*
 * init/quit
 */

/* initialize library with writeable destination buffer */
/* returns EUI_FALSE on failure */
int eui_init(int w, int h, int bpp, int pitch, void *buffer)
{
	if (!w || !h || !bpp || !pitch || !buffer)
		return EUI_FALSE;

	/* set base functions */
	switch (bpp)
	{
		case 1:
			state.set_pixel = set_pixel_1;
			state.set_box = set_box_1;
			state.set_bitmap = set_bitmap_1;
			break;

		case 2:
			state.set_pixel = set_pixel_2;
			state.set_box = set_box_2;
			state.set_bitmap = set_bitmap_2;
			break;

		case 4:
			state.set_pixel = set_pixel_4;
			state.set_box = set_box_4;
			state.set_bitmap = set_bitmap_4;
			break;

		case 8:
			state.set_pixel = set_pixel_8;
			state.set_box = set_box_8;
			state.set_bitmap = set_bitmap_8;
			break;

		default:
			return EUI_FALSE;
	}

	/* set state values */
	state.w = w;
	state.h = h;
	state.bpp = bpp;
	state.pitch = pitch;
	state.buffer = buffer;
	eui_font_set(EUI_FONT_8X8);
	state.set_glyph = set_glyph_font_bitmap;

	return EUI_TRUE;
}

/* shutdown library and clear state */
void eui_quit(void)
{
	memset(&state, 0, sizeof(state));
}

/*
 * context handling
 */

/* begin new eui context and create root frame */
/* returns EUI_FALSE on failure */
int eui_context_begin(void)
{
	state.frame_index = 0;
	state.num_drawcmds = 0;
	state.frame_z = 0;
	if (!eui_frame_push(0, 0, state.w, state.h))
		return EUI_FALSE;

	return EUI_TRUE;
}

/* end current eui context and destroy root frame */
void eui_context_end(void)
{
	drawcmd_t *drawcmd;
	int i;

	/* init sorted queue */
	for (i = 0; i < state.num_drawcmds; i++)
		state.drawcmds_order[i] = i;

	/* sort drawcmd queue */
	qsort(state.drawcmds_order, state.num_drawcmds, sizeof(int), eui_drawcmd_compare);

	/* go through drawcmd queue */
	for (i = 0; i < state.num_drawcmds; i++)
	{
		drawcmd = &state.drawcmds[state.drawcmds_order[i]];
		switch (drawcmd->type)
		{
			case DRAW_PIXEL:
				state.set_pixel(drawcmd->cmd.pixel.x, drawcmd->cmd.pixel.y, drawcmd->cmd.pixel.color);
				break;

			case DRAW_BOX:
				state.set_box(drawcmd->cmd.box.x, drawcmd->cmd.box.y, drawcmd->cmd.box.w, drawcmd->cmd.box.h, drawcmd->cmd.box.color);
				break;

			case DRAW_GLYPH:
				state.set_glyph(drawcmd->cmd.glyph.x, drawcmd->cmd.glyph.y,
					drawcmd->cmd.glyph.glyph, drawcmd->cmd.glyph.color,
					drawcmd->cmd.glyph.font);
				break;

			case DRAW_BITMAP:
				state.set_bitmap(drawcmd->cmd.bitmap.x, drawcmd->cmd.bitmap.y,
					drawcmd->cmd.bitmap.w, drawcmd->cmd.bitmap.h,
					drawcmd->cmd.bitmap.bpp, drawcmd->cmd.bitmap.pitch,
					drawcmd->cmd.bitmap.pixels);
				break;
		}
	}
}

/*
 * frame handling
 */

/* create and enter new child frame, transformed from the current frame */
/* returns EUI_FALSE on failure */
int eui_frame_push(int x, int y, int w, int h)
{
	if (state.frame_index == EUI_MAX_FRAMES - 1)
		return EUI_FALSE;

	eui_transform_box(&x, &y, w, h);

	state.frame_index++;

	state.frames[state.frame_index].x = x;
	state.frames[state.frame_index].y = y;
	state.frames[state.frame_index].w = w;
	state.frames[state.frame_index].h = h;
	state.frames[state.frame_index].align.x = EUI_ALIGN_START;
	state.frames[state.frame_index].align.y = EUI_ALIGN_START;
	state.frames[state.frame_index].clip = EUI_FALSE;
	state.frames[state.frame_index].num_drawcmds = 0;
	state.frames[state.frame_index].z = state.frame_z++;

	return EUI_TRUE;
}

/* return to parent frame */
void eui_frame_pop(void)
{
	if (state.frame_index)
		state.frame_index--;
}

/* set alignment for elements in the current frame */
void eui_frame_align_set(int align_x, int align_y)
{
	state.frames[state.frame_index].align.x = align_x;
	state.frames[state.frame_index].align.y = align_y;
}

/* get alignment for elements in the current frame */
void eui_frame_align_get(int *align_x, int *align_y)
{
	if (align_x)
		*align_x = state.frames[state.frame_index].align.x;

	if (align_y)
		*align_y = state.frames[state.frame_index].align.y;
}

/* if set to EUI_TRUE, elements will be clipped to the current frame edges */
void eui_frame_clip_set(int clip)
{
	state.frames[state.frame_index].clip = clip ? EUI_TRUE : EUI_FALSE;
}

/* returns EUI_TRUE if clipping is enabled for this frame */
int eui_frame_clip_get(void)
{
	return state.frames[state.frame_index].clip ? EUI_TRUE : EUI_FALSE;
}

/* offset z value of current frame */
void eui_frame_z_offset(int z)
{
	state.frames[state.frame_index].z += z;
}

/* set z value of current frame */
void eui_frame_z_set(int z)
{
	state.frames[state.frame_index].z = z;
}

/* get z value of current frame */
int eui_frame_z_get(void)
{
	return state.frames[state.frame_index].z;
}

/*
 * font handling
 */

/* set font */
void eui_font_set(int font)
{
	if (font < EUI_FONT_8X8 || font > EUI_FONT_8X14)
		return;

	switch (font)
	{
		case EUI_FONT_8X8:
			state.font = &font_8x8;
			break;

		case EUI_FONT_8X14:
			state.font = &font_8x14;
			break;
	}

	state.fontnum = font;
}

/* get font */
int eui_font_get(void)
{
	return state.fontnum;
}

/*
 * utilities
 */

/* clear screen with color */
void eui_screen_clear(unsigned int color)
{
	switch (state.bpp)
	{
		case 1:
			if (color)
				color = 0xFF;
			else
				color = 0x00;
			break;

		case 2:
			color = color << 6 | color << 4 | color << 2 | color;
			break;

		case 4:
			color = color << 4 | color;
			break;
	}

	memset(state.buffer, color, state.h * state.pitch);
}

/* get cell dimensions of text, with newline and alignment handling */
/* returns EUI_FALSE on failure */
int eui_get_text_dimensions(int *w, int *h, char *s)
{
	int c, x, y;
	int lastx = 0;

	if (!s)
		return EUI_FALSE;

	x = 0;
	y = 0;

	/* find newlines in string */
	while ((c = *s++))
	{
		if (c == '\n')
		{
			y += 1;
			lastx = x;
			x = 0;
		}
		else
		{
			x += 1;
		}
	}

	if (w)
		*w = lastx > x ? lastx * state.font->glyph_w : x * state.font->glyph_w;

	if (h)
		*h = (y + 1) * state.font->glyph_h;

	return EUI_TRUE;;
}

/* convert error code to printable string */
const char *eui_error_string(int code)
{
	EUI_UNUSED(code);
	return NULL;
}

/* transform box to current frame with alignment */
void eui_transform_box(int *x, int *y, int w, int h)
{
	switch (state.frames[state.frame_index].align.x)
	{
		case EUI_ALIGN_START:
			*x += state.frames[state.frame_index].x;
			break;
		case EUI_ALIGN_MIDDLE:
			*x += state.frames[state.frame_index].x + state.frames[state.frame_index].w / 2 - w / 2;
			break;
		case EUI_ALIGN_END:
			*x += state.frames[state.frame_index].x + state.frames[state.frame_index].w - w;
			break;
		default:
			break;
	}

	switch (state.frames[state.frame_index].align.y)
	{
		case EUI_ALIGN_START:
			*y += state.frames[state.frame_index].y;
			break;
		case EUI_ALIGN_MIDDLE:
			*y += state.frames[state.frame_index].y + state.frames[state.frame_index].h / 2 - h / 2;
			break;
		case EUI_ALIGN_END:
			*y += state.frames[state.frame_index].y + state.frames[state.frame_index].h - h;
			break;
		default:
			break;
	}
}

/* clip box to current frame and screen size */
/* returns EUI_TRUE if the box will be completely clipped away */
int eui_clip_box(int *x, int *y, int *w, int *h)
{
	if (state.frames[state.frame_index].clip)
	{
		int frame_x, frame_y, frame_w, frame_h;

		/* save frame coordinates */
		frame_x = state.frames[state.frame_index].x;
		frame_y = state.frames[state.frame_index].y;
		frame_w = state.frames[state.frame_index].w;
		frame_h = state.frames[state.frame_index].h;

		/* clip frame to screen */
		if (eui_clip_box_lower(&frame_x, &frame_y, &frame_w, &frame_h, 0, 0, state.w, state.h))
			return EUI_TRUE;

		/* clip shape to frame */
		return eui_clip_box_lower(x, y, w, h, frame_x, frame_y, frame_w, frame_h);
	}
	else
	{
		/* clip shape to screen */
		return eui_clip_box_lower(x, y, w, h, 0, 0, state.w, state.h);
	}
}

/*
 * drawing primitives
 */

/* draw box */
void eui_draw_box(int x, int y, int w, int h, unsigned int color)
{
	drawcmd_t drawcmd;

	eui_transform_box(&x, &y, w, h);

	/* setup drawcmd */
	drawcmd.type = DRAW_BOX;
	drawcmd.cmd.box.color = color;

	drawcmd.cmd.box.x = x;
	drawcmd.cmd.box.y = y;
	drawcmd.cmd.box.w = w;
	drawcmd.cmd.box.h = h;
	if (!eui_clip_box(&drawcmd.cmd.box.x, &drawcmd.cmd.box.y, &drawcmd.cmd.box.w, &drawcmd.cmd.box.h))
		eui_drawcmd_push(&drawcmd);
}

/* draw box border */
void eui_draw_box_border(int x, int y, int w, int h, int t, unsigned int color)
{
	drawcmd_t drawcmd;

	eui_transform_box(&x, &y, w, h);

	/* setup drawcmd */
	drawcmd.type = DRAW_BOX;
	drawcmd.cmd.box.color = color;

	/* top line */
	drawcmd.cmd.box.x = x;
	drawcmd.cmd.box.y = y;
	drawcmd.cmd.box.w = w;
	drawcmd.cmd.box.h = t;
	if (!eui_clip_box(&drawcmd.cmd.box.x, &drawcmd.cmd.box.y, &drawcmd.cmd.box.w, &drawcmd.cmd.box.h))
		eui_drawcmd_push(&drawcmd);

	/* bottom line */
	drawcmd.cmd.box.x = x;
	drawcmd.cmd.box.y = y + h - t;
	drawcmd.cmd.box.w = w;
	drawcmd.cmd.box.h = t;
	if (!eui_clip_box(&drawcmd.cmd.box.x, &drawcmd.cmd.box.y, &drawcmd.cmd.box.w, &drawcmd.cmd.box.h))
		eui_drawcmd_push(&drawcmd);

	/* left line */
	drawcmd.cmd.box.x = x;
	drawcmd.cmd.box.y = y + t;
	drawcmd.cmd.box.w = t;
	drawcmd.cmd.box.h = h - t * 2;
	if (!eui_clip_box(&drawcmd.cmd.box.x, &drawcmd.cmd.box.y, &drawcmd.cmd.box.w, &drawcmd.cmd.box.h))
		eui_drawcmd_push(&drawcmd);

	/* right line */
	drawcmd.cmd.box.x = x + w - t;
	drawcmd.cmd.box.y = y + t;
	drawcmd.cmd.box.w = t;
	drawcmd.cmd.box.h = h - t * 2;
	if (!eui_clip_box(&drawcmd.cmd.box.x, &drawcmd.cmd.box.y, &drawcmd.cmd.box.w, &drawcmd.cmd.box.h))
		eui_drawcmd_push(&drawcmd);
}

/* draw text */
void eui_draw_text(int x, int y, unsigned int color, char *s)
{
	int c;
	int start_x;
	char *ptr;
	int w, h;
	unsigned int len = 0;
	drawcmd_t drawcmd;

	/* get text size */
	if (!eui_get_text_dimensions(&w, &h, s))
		return;

	/* transform to size */
	eui_transform_box(&x, &y, w, h);

	/* setup drawcmd */
	drawcmd.type = DRAW_GLYPH;
	drawcmd.cmd.glyph.color = color;
	drawcmd.cmd.glyph.font = state.font;

	/* draw string */
	start_x = x;
	while ((c = *s++))
	{
		if (c == '\n')
		{
			switch (state.frames[state.frame_index].align.x)
			{
				case EUI_ALIGN_START:
					/* set next string position */
					x = start_x;
					y += state.font->glyph_h;
					break;

				case EUI_ALIGN_MIDDLE:
					/* get length of next string chunk */
					ptr = s;
					while (*ptr && *ptr != '\n') ptr++;
					len = ptr - s;
					/* set next string position */
					x = start_x + (w / 2) - ((len * state.font->glyph_w) / 2);
					y += state.font->glyph_h;
					break;

				case EUI_ALIGN_END:
					/* get length of next string chunk */
					ptr = s;
					while (*ptr && *ptr != '\n') ptr++;
					len = ptr - s;
					/* set next string position */
					x = start_x + w - (len * state.font->glyph_w);
					y += state.font->glyph_h;
					break;
			}
		}
		else
		{
			drawcmd.cmd.glyph.x = x;
			drawcmd.cmd.glyph.y = y;
			drawcmd.cmd.glyph.glyph = c;
			eui_drawcmd_push(&drawcmd);
			x += state.font->glyph_w;
		}
	}
}

/* draw formatted text */
void eui_draw_textf(int x, int y, unsigned int color, char *s, ...)
{
	static char buffer[1024];
	va_list args;

	va_start(args, s);
	vsprintf(buffer, s, args);
	va_end(args);

	eui_draw_text(x, y, color, buffer);
}


/* draw bitmap */
void eui_draw_bitmap(int x, int y, int w, int h, int bpp, int pitch, void *pixels)
{
	drawcmd_t drawcmd;

	if (!w || !h || !bpp || !pitch || !pixels)
		return;
	if (bpp != state.bpp)
		return;

	/* transform */
	eui_transform_box(&x, &y, w, h);

	/* push drawcmd */
	drawcmd.type = DRAW_BITMAP;
	drawcmd.cmd.bitmap.x = x;
	drawcmd.cmd.bitmap.y = y;
	drawcmd.cmd.bitmap.w = w;
	drawcmd.cmd.bitmap.h = h;
	drawcmd.cmd.bitmap.bpp = bpp;
	drawcmd.cmd.bitmap.pitch = pitch;
	drawcmd.cmd.bitmap.pixels = pixels;
	eui_drawcmd_push(&drawcmd);
}
